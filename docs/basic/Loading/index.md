# 로딩 컴포넌트

로딩 컴포넌트는 일반적으로 사용되는 대표적인 인디케이터 중 하나입니다.
겟차 서비스에서 실행이 오래걸리는 작업을 사용자에게 알려주기 위해 사용됩니다.

서비스 이용에 있어 서버 장애나 사용환경의 변화, 버그들이 나올 수 있습니다. 로딩 컴포넌트는 이에 대한 최소한의 설명이고, 이 설명을 통해 사용자의 이탈을 막습니다.

## 사진

---

### 기능

---

1. 로딩

    기본적으로 Lottie로 구현된 로딩 컴포넌트가 렌더링됩니다.

2. 성공 / 실패

    성공했을 경우나 실패했을 경우 등 추가하기 나름인 상태에 대해 그에 맞는 Lottie가 재생됩니다.

    물론 해당 상태가 되었을 때, 즉 해당 상태가 되었다는 것을 인지했을 땐 이미 로딩은 끝난 상태이므로 더이상 로딩을 보여주지 않아야 하지만, 성공 및 실패에 대한 상태를 명확히 보여주기 위해서 0.5~1초 정도를 추가로 로딩스테이트에 머무르게 합니다.

3. 타임아웃

    타임아웃이 걸렸음에도 로딩 컴포넌트가 종료되지 않는다면 그것대로 큰 문제일 것입니다. 그래서 타임아웃을 설정해준다면, 별도 설정을 해주지 않아도 로딩 컴포넌트를 실패로 status 변경 후 종료합니다.

4. 텍스트 로딩

    텍스트를 array로 받고, Loading 컴포넌트 아래에 렌더링합니다. 몇초동안 보여줄지까지 넣어준다면 해당 시간과 텍스트 갯수로 계산해서 보여줍니다.

    생각보다 너무 빨리 끝나서 그 텍스트들을 미쳐 보여주기도 전에 종료된다면 어떻게할지는 모르겠습니다. 🙄

## 사용법

---

### 선언

어디서든 불러올 수 있게 서비스의 최상단에 선언합니다.

```tsx
return (
	...
	<Loading ref={(ref) => Loading.setRef(ref)} />
	...
)
```

### 사용

콜백함수 내에서 코드의 절차에 따라 사용하시면 됩니다.

```jsx
import { Loading } from 'Getcha-Ui-Toolkit'

...

// 로딩을 켭니다.
Loading.show()

// 로딩의 상태를 변경합니다.
Loading.update({status: "success"})

// 로딩을 종료합니다.
Loading.close()
```

## Properties

---

| name          | type                             | 설명                                                                                                                                     | default    |
| ------------- | -------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- | ---------- |
| isLoading     | boolean                          | 로딩 컴포넌트를 켜고 끄는 플래그입니다. 이 값을 true로 바꿔주면 로딩 컴포넌트가 최상단에 로드됩니다.                                     | false      |
| status        | “loading” or “success” or “fail” | 로딩의 타입입니다. 기본값은 loading이고 success나 fail로 변화시킬 수 있습니다.                                                           | “loading”  |
| timeout       | number                           | 로딩의 타임아웃입니다. 해당 값만큼을 기다려주고, 그래도 close 메소드가 호출되지 않으면 실패로 간주하고 fail status로 변경 후 종료합니다. | 15 \* 1000 |
| texts         | string[]                         | 로딩이 진행되는 동안 보여줄 text입니다.                                                                                                  | []         |
| textsLoadTime | number                           | texts property를 노출할 시간입니다. texts의 배열 길이와 textsLoadTime 값을 통해 렌더링 로직을 결정합니다.                                | 0          |

## Method

---

아래 세가지 메소드를 활용할 수 있습니다.

| name   | 설명                                                                                                |
| ------ | --------------------------------------------------------------------------------------------------- |
| show   | 로딩을 보여줍니다. status는 loading입니다.                                                          |
| update | 로딩의 상태값을 변경합니다. 변경되는 순간 변경된 로딩 Lottie가 실행되고 1초 뒤 자동으로 종료됩니다. |
| close  | 로딩을 종료합니다.                                                                                  |
